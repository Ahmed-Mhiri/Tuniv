<div class="page-container">
  <div class="page-header">
    <div>
      <a routerLink="/universities" nz-button nzType="text" class="back-link">
        <span nz-icon nzType="arrow-left"></span>
        Back to All Universities
      </a>
      <h1 nz-typography>Modules at {{ universityName() }}</h1>
    </div>
  </div>

  @if (isLoading() && modules().length === 0) {
    <div class="status-container">
      <app-spinner [isLoading]="isLoading()" [overlay]="false" tip="Loading modules..."></app-spinner>
    </div>
  } @else if (error()) {
    <nz-alert nzType="error" [nzMessage]="error()"></nz-alert>
  } @else {
    <div class="module-grid">
      @for (mod of modules(); track mod.moduleId) {
        <a class="module-link" [routerLink]="['/modules', mod.moduleId, 'questions']">
          <nz-card class="module-card" nzHoverable>
            <span nz-icon nzType="book" class="card-icon"></span>
            <h4 class="card-title">{{ mod.name }}</h4>
          </nz-card>
        </a>
      }
    </div>

    @if (modules().length === 0) {
      <p class="no-modules-message">No modules have been added for this university yet.</p>
    }

    @if (pageInfo() && pageInfo().totalElements > pageInfo().pageSize) {
       <div class="paginator-container">
         <app-paginator
           [page]="pageInfo()!"
           (pageChange)="onPageChange($event)"
           (pageSizeChange)="onPageSizeChange($event)"
         ></app-paginator>
       </div>
     }
 
     @if (isLoading()) {
       <app-spinner [isLoading]="isLoading()" [overlay]="true"></app-spinner>
     }
  }
</div>