/* src/styles.scss */

/* ==========================================================================
   1. Imports & Global Setup
   ========================================================================== */
@use "tailwindcss";
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&display=swap');

*, *::before, *::after {
  box-sizing: border-box;
  transition-property: color, background-color, border-color;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--font-body);
  background-color: var(--color-background);
  color: var(--color-text-primary); // Base color
  line-height: 1.6;
}

/* ==========================================================================
   2. Theme Variable Definitions
   ========================================================================== */
@theme {
  /* Font */
  --font-body: "Plus Jakarta Sans", sans-serif;
  --font-display: "Plus Jakarta Sans", sans-serif;

  /* Light Mode */
  --color-primary: #4338CA;
  --color-primary-hover: #3730A3;
  --color-accent: #f59e0b;        /* Amber 500 */
  --color-accent-hover: #d97706;  /* Amber 600 */
  --color-background: #F9FAFB;
  --color-surface: #FFFFFF;
  --color-surface-subtle: #F3F4F6;
  --color-text-primary: #1F2937;
  --color-text-secondary: #6B7280;
  --color-border: #E5E7EB;
  --color-on-primary: #ffffff;
  --color-success: #16A34A; // A nice green
  --color-warning: #F59E0B; // A vibrant amber/orange
}

html.dark {
  /* Dark Mode */
  --color-primary: #818CF8;
  --color-primary-hover: #6366F1;
  --color-accent: #fbbf24;        /* Amber 400 */
  --color-accent-hover: #f59e0b;  /* Amber 500 */
  --color-background: #111827;
  --color-surface: #1F2937;
  --color-surface-subtle: #374151;
  --color-text-primary: #F3F4F6;
  --color-text-secondary: #9CA3AF;
  --color-border: #374151;
  --color-on-primary: #ffffff;
  --color-success: #4ADE80; // A lighter green for dark mode
  --color-warning: #FBBF24; // A lighter amber for dark mode
}

/* ==========================================================================
   3. Base Element & Typography Reset (The "Stronger Pattern")
   ========================================================================== */
/*
 * This ensures all common text elements inherit the correct theme
 * color by default, preventing issues with unstyled <p> or <h2> tags.
*/
h1, h2, h3, h4, h5, h6, p, span, div, li, strong {
  color: var(--color-text-primary); /* FIX: Apply the theme color directly */
}

/* Ensure links also use a primary color and are readable */
a {
  color: var(--color-primary);
  &:hover {
    color: var(--color-primary-hover);
  }
}

/* ==========================================================================
   4. Global NG-ZORRO Theming Overrides
   ========================================================================== */

/* --- Typography --- */
.ant-typography, [nz-typography] {
  color: var(--color-text-primary) !important;
}
.ant-typography[nztype='secondary'] {
  color: var(--color-text-secondary) !important;
}

/* ==========================================================================
   Global Button Styles (Final Version)
   ========================================================================== */
/*
 * This provides a robust base style for all antd buttons and specific
 * overrides for custom variants like primary and accent.
*/

// --- Base/Default Button Style ---
// Targets any button or link with the ant-btn class that IS NOT a primary or accent button.
// This will fix your "Edit Profile" button.
.ant-btn:not(.btn-primary):not(.btn-accent):not([nztype='primary']) {
  background-color: var(--color-surface) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-secondary) !important;

  &:hover,
  &:focus {
    border-color: var(--color-primary) !important;
    color: var(--color-primary) !important;
  }
}

// --- Primary Button ---
.btn-primary,
button[nzType='primary'].ant-btn {
  background-color: var(--color-primary) !important;
  border-color: var(--color-primary) !important;
  color: var(--color-on-primary) !important;

  &:hover,
  &:focus {
    background-color: var(--color-primary-hover) !important;
    border-color: var(--color-primary-hover) !important;
  }
}

// --- Accent Button ---
// This will now correctly style your "Ask Question" button.
.btn-accent {
  background-color: var(--color-accent) !important;
  border-color: var(--color-accent) !important;
  color: var(--color-on-primary) !important;

  &:hover,
  &:focus {
    background-color: var(--color-accent-hover) !important;
    border-color: var(--color-accent-hover) !important;
  }
}

// --- Global Disabled State ---
button[disabled],
.ant-btn[disabled] {
  background-color: var(--color-surface-subtle) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-secondary) !important;
  opacity: 0.6;
}

/* --- Forms & Inputs --- */
.ant-form-item-label > label {
  color: var(--color-text-secondary) !important;
  font-weight: 500;
}
.ant-input, .ant-input-affix-wrapper {
  background-color: var(--color-background) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-primary) !important;
  input {
    background-color: transparent !important;
    color: var(--color-text-primary) !important;
  }
  &::placeholder {
    color: var(--color-text-secondary) !important;
  }
  &:hover, &:focus-within {
    border-color: var(--color-primary) !important;
  }
}
.ant-input-prefix .anticon {
  color: var(--color-text-secondary) !important;
}

/* --- Cards & Menus --- */
.ant-card, .ant-dropdown-menu, .ant-menu {
  background-color: var(--color-surface) !important;
  border-color: var(--color-border) !important;
}
.ant-card-head { border-bottom-color: var(--color-border) !important; }
.ant-card-head-title { color: var(--color-text-primary) !important; }
.ant-menu-item {
  color: var(--color-text-secondary) !important;
  &:hover { color: var(--color-primary) !important; }
}
.ant-menu-item-selected {
  background-color: var(--color-surface-subtle) !important;
  color: var(--color-primary) !important;
}
// --- THEMED SVG LOGO ---
.themed-logo {
  display: inline-block;
  // Use the primary text color of your theme as the logo color
  background-color: var(--color-text-primary);
  
  // Use the SVG file as a mask (stencil)
  mask-image: url('/assets/images/TunivLogo.svg');
  -webkit-mask-image: url('/assets/images/TunivLogo.svg'); // For broader browser compatibility
  
  // Ensure the mask scales correctly
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;

  // Set the size to match your original <img> tag (h-10 is 2.5rem)
  width: 2.5rem;
  height: 2.5rem;
}

/* --- Upload --- */
.ant-upload-drag {
  background-color: var(--color-background) !important;
  border-color: var(--color-border) !important;
  transition: border-color 0.3s;

  &:hover {
    border-color: var(--color-primary) !important;
  }
}
.ant-upload-drag-icon .anticon {
  color: var(--color-primary) !important;
}
.ant-upload-text {
  color: var(--color-text-primary) !important;
}
.ant-upload-hint {
  color: var(--color-text-secondary) !important;
}
.ant-upload-list-item {
  background-color: var(--color-surface-subtle) !important;
  border: 1px solid var(--color-border) !important;
  color: var(--color-text-primary) !important;

  &:hover {
    background-color: var(--color-surface) !important;
  }
}
/* --- Popovers & Messages (The Fix) --- */
.ant-popover-inner,
.ant-message-notice-content {
  background-color: var(--color-surface) !important;
  color: var(--color-text-primary) !important;
}

.ant-popover-message-title {
  color: var(--color-text-primary) !important;
}

/* Theme the icons based on their type */
.ant-popover-message-icon .anticon-exclamation-circle {
  color: var(--color-warning) !important;
}

.ant-message-success .anticon {
  color: var(--color-success) !important;
}
.ant-message-error .anticon {
  color: var(--color-accent) !important; /* Use your accent red for errors */
}
.ant-message-warning .anticon {
  color: var(--color-warning) !important;
}
/* --- Badges --- */
.ant-badge-status-text {
  color: var(--color-text-secondary) !important;
}
.ant-badge-status-dot {
  // This uses the theme color we defined earlier
  background-color: var(--color-success) !important;
}